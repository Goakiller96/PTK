(()=>{"use strict";let e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}};let t=(e,t=500,n=0)=>{e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=`${e.offsetHeight}px`,e.offsetHeight,e.style.overflow="hidden",e.style.height=n?`${n}px`:"0px",e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.hidden=!n,!n&&e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),!n&&e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide"),document.dispatchEvent(new CustomEvent("slideUpDone",{detail:{target:e}}))}),t))},n=(e,t=500,n=0)=>{if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden=!e.hidden&&null,n&&e.style.removeProperty("height");let i=e.offsetHeight;e.style.overflow="hidden",e.style.height=n?`${n}px`:"0px",e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=i+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide"),document.dispatchEvent(new CustomEvent("slideDownDone",{detail:{target:e}}))}),t)}},i=!0,o=(e=500)=>{let t=document.querySelector("body");if(i){let n=document.querySelectorAll("[data-lp]");setTimeout((()=>{for(let e=0;e<n.length;e++){n[e].style.paddingRight="0px"}t.style.paddingRight="0px",document.documentElement.classList.remove("lock")}),e),i=!1,setTimeout((function(){i=!0}),e)}},s=(e=500)=>{let t=document.querySelector("body");if(i){let n=document.querySelectorAll("[data-lp]");for(let e=0;e<n.length;e++){n[e].style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px"}t.style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",document.documentElement.classList.add("lock"),i=!1,setTimeout((function(){i=!0}),e)}};function r(e,t){const n=Array.from(e).filter((function(e,n,i){if(e.dataset[t])return e.dataset[t].split(",")[0]}));if(n.length){const e=[];n.forEach((n=>{const i={},o=n.dataset[t].split(",");i.value=o[0],i.type=o[1]?o[1].trim():"max",i.item=n,e.push(i)}));let i=e.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));i=function(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))}(i);const o=[];if(i.length)return i.forEach((t=>{const n=t.split(","),i=n[1],s=n[2],r=window.matchMedia(n[0]),a=e.filter((function(e){if(e.value===i&&e.type===s)return!0}));o.push({itemsArray:a,matchMedia:r})})),o}}let a=!1;setTimeout((()=>{if(a){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0);new class{constructor(e){this.type=e}init(){this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=[...document.querySelectorAll("[data-da]")],this.nodes.forEach((e=>{const t=e.dataset.da.trim().split(","),n={};n.element=e,n.parent=e.parentNode,n.destination=document.querySelector(`${t[0].trim()}`),n.breakpoint=t[1]?t[1].trim():"767",n.place=t[2]?t[2].trim():"last",n.index=this.indexInParent(n.parent,n.element),this.оbjects.push(n)})),this.arraySort(this.оbjects),this.mediaQueries=this.оbjects.map((({breakpoint:e})=>`(${this.type}-width: ${e}px),${e}`)).filter(((e,t,n)=>n.indexOf(e)===t)),this.mediaQueries.forEach((e=>{const t=e.split(","),n=window.matchMedia(t[0]),i=t[1],o=this.оbjects.filter((({breakpoint:e})=>e===i));n.addEventListener("change",(()=>{this.mediaHandler(n,o)})),this.mediaHandler(n,o)}))}mediaHandler(e,t){e.matches?t.forEach((e=>{this.moveTo(e.place,e.element,e.destination)})):t.forEach((({parent:e,element:t,index:n})=>{t.classList.contains(this.daClassname)&&this.moveBack(e,t,n)}))}moveTo(e,t,n){t.classList.add(this.daClassname),"last"===e||e>=n.children.length?n.append(t):"first"!==e?n.children[e].before(t):n.prepend(t)}moveBack(e,t,n){t.classList.remove(this.daClassname),void 0!==e.children[n]?e.children[n].before(t):e.append(t)}indexInParent(e,t){return[...e.children].indexOf(t)}arraySort(e){"min"===this.type?e.sort(((e,t)=>e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?-1:"last"===e.place||"first"===t.place?1:0:e.breakpoint-t.breakpoint)):e.sort(((e,t)=>e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?1:"last"===e.place||"first"===t.place?-1:0:t.breakpoint-e.breakpoint))}}("max").init();const l=function(){const e=[];return[{title:"Горелка плазменная Фламинго для резки металла",article:"FL-12345",image:"img/cards/flamingo.webp",alt:"Горелка Фламинго для плазменной резки металлов",description:"Профессиональная горелка для плазменной резки с увеличенным ресурсом",hasDetails:!0,detailsUrl:"index.html"},{title:"Плазмотрон ВПР-410 в сборе",article:"SP-410011",image:"img/plazmotron/vpr-410.png",sizes:["2.5 мм","3.0 мм","3.5 мм","4.0 мм"],sizeLabel:"Диаметр сопла:",alt:"Сопло 410 для плазмотрона",description:"Сопла для плазменной резки серии 410 с медным охлаждением",hasDetails:!0,detailsUrl:"plazmotron-vpr-410.html"},{title:"Сопло плазменное 402 для резки алюминия",article:"SP-402011",image:"img/cards/soplo-402.png",price:242.56,sizes:["2.5 мм","3.0 мм","3.5 мм","4.0 мм"],sizeLabel:"Диаметр сопла:",alt:"Сопло 402 для резки цветных металлов",description:"Износостойкие сопла для резки алюминия и цветных металлов"},{title:"Электрод для плазмотрона конусный",article:"EL-4014",image:"img/cards/electrod.png",price:420,sizes:["Гафний","Биметалл"],sizeLabel:"Тип вставки:",alt:"Электроды для плазменной резки",description:"Катоды для плазмотронов с различными типами вставок"},{title:"Сопло плазменное 210 для тонколистового металла",article:"SP-1512",image:"img/cards/soplo-210.png",price:242.56,sizes:["1.3 мм","1.5 мм","1.8 мм","2.0 мм"],sizeLabel:"Диаметр сопла:",alt:"Сопло 210 для тонкой резки",description:"Сопла малого диаметра для точной резки тонколистового металла"},{title:"Ремкомплект для горелки Фламинго",article:"RK-12350",image:"img/cards/flamingo.png",price:1999,sizes:["Комплект A","Комплект B","Комплект C"],sizeLabel:"Вариант:",alt:"Ремкомплект для плазменной горелки",description:"Ремонтный комплект для горелок серии Фламинго"},{title:"Горелка плазменная Фламинго для резки металла",article:"FL-12345",image:"img/cards/flamingo.webp",price:1999,alt:"Горелка Фламинго для плазменной резки металлов",description:"Профессиональная горелка для плазменной резки с увеличенным ресурсом"},{title:"Сопло плазменное 410 для резки нержавеющей стали",article:"SP-410011",image:"img/cards/soplo-410.png",price:348.64,sizes:["2.5 мм","3.0 мм","3.5 мм","4.0 мм"],sizeLabel:"Диаметр сопла:",alt:"Сопло 410 для плазмотрона",description:"Сопла для плазменной резки серии 410 с медным охлаждением"},{title:"Сопло плазменное 402 для резки алюминия",article:"SP-402011",image:"img/cards/soplo-402.png",price:242.56,sizes:["2.5 мм","3.0 мм","3.5 мм","4.0 мм"],sizeLabel:"Диаметр сопла:",alt:"Сопло 402 для резки цветных металлов",description:"Износостойкие сопла для резки алюминия и цветных металлов"},{title:"Электрод для плазмотрона конусный",article:"EL-4014",image:"img/cards/electrod.png",price:420,sizes:["Гафний","Биметалл"],sizeLabel:"Тип вставки:",alt:"Электроды для плазменной резки",description:"Катоды для плазмотронов с различными типами вставок"},{title:"Сопло плазменное 210 для тонколистового металла",article:"SP-1512",image:"img/cards/soplo-210.png",price:242.56,sizes:["1.3 мм","1.5 мм","1.8 мм","2.0 мм"],sizeLabel:"Диаметр сопла:",alt:"Сопло 210 для тонкой резки",description:"Сопла малого диаметра для точной резки тонколистового металла"},{title:"Ремкомплект для горелки Фламинго",article:"RK-12350",image:"img/cards/flamingo.png",price:1999,sizes:["Комплект A","Комплект B","Комплект C"],sizeLabel:"Вариант:",alt:"Ремкомплект для плазменной горелки",description:"Ремонтный комплект для горелок серии Фламинго"},{title:"Горелка плазменная Фламинго для резки металла",article:"FL-12345",image:"img/cards/flamingo.webp",price:1999,alt:"Горелка Фламинго для плазменной резки металлов",description:"Профессиональная горелка для плазменной резки с увеличенным ресурсом"},{title:"Сопло плазменное 410 для резки нержавеющей стали",article:"SP-410011",image:"img/cards/soplo-410.png",price:348.64,sizes:["2.5 мм","3.0 мм","3.5 мм","4.0 мм"],sizeLabel:"Диаметр сопла:",alt:"Сопло 410 для плазмотрона",description:"Сопла для плазменной резки серии 410 с медным охлаждением"},{title:"Сопло плазменное 402 для резки алюминия",article:"SP-402011",image:"img/cards/soplo-402.png",price:242.56,sizes:["2.5 мм","3.0 мм","3.5 мм","4.0 мм"],sizeLabel:"Диаметр сопла:",alt:"Сопло 402 для резки цветных металлов",description:"Износостойкие сопла для резки алюминия и цветных металлов"},{title:"Электрод для плазмотрона конусный",article:"EL-4014",image:"img/cards/electrod.png",price:420,sizes:["Гафний","Биметалл"],sizeLabel:"Тип вставки:",alt:"Электроды для плазменной резки",description:"Катоды для плазмотронов с различными типами вставок"},{title:"Сопло плазменное 210 для тонколистового металла",article:"SP-1512",image:"img/cards/soplo-210.png",price:242.56,sizes:["1.3 мм","1.5 мм","1.8 мм","2.0 мм"],sizeLabel:"Диаметр сопла:",alt:"Сопло 210 для тонкой резки",description:"Сопла малого диаметра для точной резки тонколистового металла"},{title:"Ремкомплект для горелки Фламинго",article:"RK-12350",image:"img/cards/flamingo.png",price:1999,sizes:["Комплект A","Комплект B","Комплект C"],sizeLabel:"Вариант:",alt:"Ремкомплект для плазменной горелки",description:"Ремонтный комплект для горелок серии Фламинго"},{title:"Ремкомплект для горелки Фламинго",article:"RK-12350",image:"img/cards/flamingo.png",price:1999,sizes:["Комплект A","Комплект B","Комплект C"],sizeLabel:"Вариант:",alt:"Ремкомплект для плазменной горелки",description:"Ремонтный комплект для горелок серии Фламинго"}].forEach((t=>{const n=e.length>0?Math.max(...e.map((e=>e.id)))+1:1;e.push({id:n,...t})})),e}();const c=l.map((e=>({...e,schema:{"@context":"https://schema.org","@type":"Product",name:e.title,description:e.description||`${e.title} - профессиональное оборудование для плазменной резки`,image:e.image,...e.price&&{offers:{"@type":"Offer",price:e.price,priceCurrency:"RUB"}}}})));window.onload=function(){document.addEventListener("click",(function(t){const n=t.target;window.innerWidth>767.98&&e.any()&&n.classList.contains("menu__arrow")&&n.closest(".menu__item").classList.toggle("_hover");n.classList.contains("search-form__icon")?document.querySelector(".search-form").classList.toggle("_active"):!n.closest(".search-form")&&document.querySelector(".search-form._active")&&document.querySelector(".search-form").classList.remove("_active")}));const t=document.querySelector(".header");new IntersectionObserver((function(e,n){e[0].isIntersecting?t.classList.remove("_scroll"):t.classList.add("_scroll")})).observe(t)},document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("products-container"),t=document.querySelector(".cart-modal"),n=(document.getElementById("cart-icon"),document.querySelector(".close-cart")),i=document.querySelector(".cart-items"),o=document.querySelector(".total-price"),s=document.querySelector(".cart-count"),r=document.querySelector(".cart-footer"),a=document.querySelector(".submit-order"),l=document.querySelector(".search-form"),d=document.querySelector(".search-form__input"),u=document.querySelector(".search-form__clear"),p={initialItems:10,loadMoreItems:5,scrollThreshold:300};let m,y=[],g=0,f=0,h=!1,v=!1;function b(){if(h||v)return;window.innerHeight+window.scrollY>=document.documentElement.scrollHeight-p.scrollThreshold&&L(p.loadMoreItems)}function L(t){h||v||(h=!0,setTimeout((()=>{const n=Math.min(f+t,c.length),i=c.slice(f,n),o=document.createDocumentFragment();i.forEach((e=>{const t=function(e){const t=Date.now(),n=document.createElement("article");n.className="product__card",n.dataset.title=e.title,n.dataset.article=e.article,n.setAttribute("itemscope",""),n.setAttribute("itemtype","http://schema.org/Product");let i="";e.sizes&&e.sizes.length>0&&(i=`\n            <div class="product__size-selector">\n                <label for="size-${e.article}-${t}">${e.sizeLabel||"Размер:"}</label>\n                <select id="size-${e.article}-${t}" class="product__size-select">\n                    ${e.sizes.map((e=>`<option value="${e}">${e}</option>`)).join("")}\n                </select>\n            </div>\n        `);const o=e.price?`\n        <p class="product__price" itemprop="offers" itemtype="http://schema.org/Offer">\n            <span itemprop="price" content="${e.price}">${S(e.price)}</span>\n            <span itemprop="priceCurrency" content="RUB">₽</span>\n        </p>\n    `:"",s=e.hasDetails||e.detailsUrl?`\n        <a href="${e.detailsUrl||"#"}" class="product__details-link" aria-label="Подробнее о товаре ${e.title}">\n            Подробнее\n        </a>\n    `:"";return n.innerHTML=`\n        <img src="${e.image}" \n             alt="${e.alt||e.title}" \n             class="product__image" \n             loading="lazy" \n             width="300" \n             height="200" \n             itemprop="image">\n\n        <div class="product__content">\n            <h3 class="product__title" itemprop="name">${e.title}</h3>\n            \n            <div class="product__meta">\n                <p class="product__subtitle" itemprop="sku">Артикул: ${e.article}</p>\n                ${s}\n            </div>\n            \n            <div class="product__bottom-section">\n                ${o}\n                ${i}\n                \n                <div class="product__footer">\n                    <div class="quantity__controls">\n                        <button type="button" \n                                class="quantity__btn minus" \n                                aria-label="Уменьшить количество">\n                            −\n                        </button>\n                        <input type="number" \n                               class="quantity__input" \n                               value="1" \n                               min="1" \n                               aria-label="Количество товара">\n                        <button type="button" \n                                class="quantity__btn plus" \n                                aria-label="Увеличить количество">\n                            +\n                        </button>\n                    </div>\n                    \n                    <button type="button" \n                            class="add-to-cart" \n                            itemprop="offers" \n                            itemtype="http://schema.org/Offer"\n                            aria-label="Добавить ${e.title} в корзину">\n                        Добавить в корзину\n                    </button>\n                </div>\n            </div>\n        </div>\n    `,n}(e);o.appendChild(t)})),e.appendChild(o),f=n,v=f>=c.length,h=!1,!v&&function(){const e=document.documentElement.scrollHeight,t=window.innerHeight,n=window.scrollY;return e-t-n<p.scrollThreshold}()&&L(p.loadMoreItems)}),300))}function _(){const e=document.querySelector(".cart-modal"),t=document.querySelector(".cart-overlay");e&&e.classList.remove("active"),t&&t.classList.remove("active"),document.body.classList.remove("body-no-scroll")}function w(){if(!e)return;const t=e.querySelector(".cart-modal");e.innerHTML="",t&&e.appendChild(t),e&&(L(p.initialItems),window.addEventListener("scroll",b))}function S(e){return new Intl.NumberFormat("ru-RU").format(e)}function q(e){const t=e.querySelector(".product__subtitle"),n=e.querySelector(".product__title"),i=e.querySelector('.product__price span[itemprop="price"]'),o=e.querySelector(".quantity__input"),r=e.querySelector(".product__image"),a=e.querySelector(".product__size-select");if(!(t&&n&&o&&r))return;const l=i&&parseFloat(i.getAttribute("content"))||0,c=t.textContent.split(": ")[1]||Date.now().toString(),d=n.textContent||"Без названия",u=parseInt(o.value)||1,p=r.src||"",m=a?a.value:null,g=a?e.querySelector(".product__size-selector label")?.textContent.replace(":","").trim():null,f=`${c}-${m||"default"}`,h=y.find((e=>e.id===f));h?h.quantity+=u:y.push({id:f,baseId:c,title:d,price:l,quantity:u,image:p,subtitle:t.textContent,optionType:g,optionValue:m}),E(),s&&(s.classList.add("update"),setTimeout((()=>{s.classList.remove("update")}),500))}function E(){if(!(i&&o&&s&&r))return;i.innerHTML="",g=0,y.forEach((e=>{const t=e.price*e.quantity;g+=t;const n=document.createElement("div");n.className="cart-item",n.innerHTML=`\n                <img src="${e.image}" alt="${e.title}" class="cart-item-image">\n                <div class="cart-item-details">\n                    <h4 class="cart-item-title">${e.title}</h4>\n                    ${e.optionValue?`<p class="cart-item-option">${e.optionType}: ${e.optionValue}</p>`:""}\n                    <p class="cart-item-subtitle">${e.subtitle}</p>\n                    ${e.price>0?`<p class="cart-item-price">${S(e.price)} ₽</p>`:""}\n                    <div class="cart-item-quantity">\n                        <div class="quantity__controls">\n                            <button type="button" class="quantity__btn minus" data-id="${e.id}">-</button>\n                            <input type="number" class="quantity__input" value="${e.quantity}" min="1" data-id="${e.id}">\n                            <button type="button" class="quantity__btn plus" data-id="${e.id}">+</button>\n                        </div>\n                        <button class="cart-item-remove" data-id="${e.id}">×</button>\n                    </div>\n                </div>\n            `,i.appendChild(n)})),a&&a.setAttribute("aria-label",`Отправить заказ на сумму ${S(g)} руб`),o.textContent=S(g);const e=y.reduce(((e,t)=>e+t.quantity),0);s.textContent=e,r.style.display=y.length>0?"block":"none",localStorage.setItem("cart",JSON.stringify(y))}function A(){if(0===y.length)return void alert("Корзина пуста!");const e={items:y,total:g,date:(new Date).toISOString()};console.log("Данные заказа:",e),alert(`Ваш заказ на сумму ${S(g)} ₽ успешно отправлен!`),y=[],E(),_(),localStorage.removeItem("cart")}function x(){clearTimeout(m),m=setTimeout((()=>{if(!d||!e)return;const t=d.value.trim().toLowerCase(),n=document.querySelectorAll(".product__card");let i=!1;const o=document.querySelector(".no-results-message");o&&o.remove(),e.classList.add("searching"),n.forEach((e=>{const n=e.dataset.title.toLowerCase(),o=e.dataset.article.toLowerCase();n.includes(t)||o.includes(t)||!t?(i=!0,e.classList.remove("hidden")):e.classList.add("hidden")})),setTimeout((()=>{e.classList.remove("searching"),!i&&t&&function(){const t=document.createElement("div");t.className="no-results-message",t.innerHTML="<p>Товары не найдены!</p>",e.appendChild(t)}()}),300)}),300)}function k(){if(!l)return;const t=l.querySelector(".search-form__icon"),n=l.querySelector(".search-form__item");function i(){d&&u&&(u.style.display=d.value?"block":"none")}d&&(d.addEventListener("input",(function(){i(),x()})),d.addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),x())}))),u&&u.addEventListener("click",(function(t){t.preventDefault(),d&&(d.value="",d.focus(),i(),x(),f=0,v=!1,h=!1,e.querySelectorAll(".product__card").forEach((e=>e.remove())),L(p.initialItems))})),t&&n&&t.addEventListener("click",(function(e){e.stopPropagation(),n.classList.toggle("active"),n.classList.contains("active")&&d&&d.focus()})),document.addEventListener("click",(function(e){l.contains(e.target)||n?.classList.remove("active")})),i()}function z(){document.addEventListener("click",(function(e){if(e.target.classList.contains("quantity__btn")){const t=e.target.closest(".quantity__controls");if(!t)return;const n=t.querySelector(".quantity__input");if(!n)return;let i=parseInt(n.value)||1;e.target.classList.contains("minus")&&i>1?i--:e.target.classList.contains("plus")&&i++,n.value=i}if(e.target.classList.contains("add-to-cart")){const t=e.target.closest(".product__card");t&&q(t)}e.target.closest("#cart-icon")&&(e.preventDefault(),function(){const e=document.querySelector(".cart-modal"),t=document.querySelector(".close-cart"),n=document.querySelector(".cart-overlay");e&&t&&n?(e.classList.add("active"),n.classList.add("active"),document.body.classList.add("body-no-scroll"),setTimeout((()=>{t.focus()}),100)):console.error("Не найдены необходимые элементы корзины")}())})),n?n.addEventListener("click",_):console.warn("Элемент .close-cart не найден"),a?a.addEventListener("click",A):console.warn("Элемент .submit-order не найден"),document.addEventListener("click",(function(e){if(e.target.classList.contains("quantity__btn")&&e.target.closest(".cart-item")){const t=e.target.getAttribute("data-id"),n=y.find((e=>e.id===t));if(!n)return;e.target.classList.contains("minus")&&n.quantity>1?n.quantity--:e.target.classList.contains("plus")&&n.quantity++,E()}if(e.target.classList.contains("cart-item-remove")){const t=e.target.getAttribute("data-id");y=y.filter((e=>e.id!==t)),E()}})),document.addEventListener("change",(function(e){if(e.target.classList.contains("quantity__input")&&e.target.closest(".cart-item")){const t=e.target.getAttribute("data-id"),n=parseInt(e.target.value)||1,i=y.find((e=>e.id===t));i&&n>=1&&(i.quantity=n,E())}}));const e=document.querySelector(".focus-trap-start"),i=document.querySelector(".focus-trap-end");t&&i&&e?(i.addEventListener("focus",(()=>{n&&n.focus()})),e.addEventListener("focus",(()=>{a&&a.focus()}))):console.warn("Элементы фокус-ловушки (.focus-trap-start, .focus-trap-end) или .cart-modal не найдены")}function S(e){return new Intl.NumberFormat("ru-RU").format(e)}document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".scroll-top");e?(window.addEventListener("scroll",(function(){window.pageYOffset>window.innerHeight/2?e.classList.add("visible"):e.classList.remove("visible")})),e.addEventListener("click",(function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}))):console.warn("Элемент .scroll-top не найден")})),function(){let e=document.querySelector(".cart-overlay");e||(e=document.createElement("div"),e.className="cart-overlay",document.body.appendChild(e)),e.addEventListener("click",_),document.addEventListener("click",(e=>{const t=document.querySelector(".cart-modal");if(!t||!t.classList.contains("active"))return;const n=t.contains(e.target),i=e.target.closest("#cart-icon");n||i||_()}))}(),z(),function(){const e=localStorage.getItem("cart");if(e)try{y=JSON.parse(e),E()}catch(e){console.error("Ошибка при загрузке корзины:",e),localStorage.removeItem("cart")}}(),e&&(w(),l&&k()),function(){function e(){const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`);const t=document.querySelector(".cart-modal");t&&(t.style.height=window.innerHeight+"px")}e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),/iPad|iPhone|iPod/.test(navigator.userAgent)&&(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="0",document.body.style.left="0",document.body.style.right="0",document.body.style.bottom="0")}()})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".header");if(!e)return;const t=e.querySelector(".header__logo-text"),n=e.querySelector(".header__logo-text-short"),i=e.querySelector(".header__body"),o=e.querySelectorAll(".phones__item"),s=e.querySelectorAll(".emails__item"),r=e.querySelectorAll(".phones__link"),a=e.querySelectorAll(".emails__link"),l=e.querySelector(".actions__contacts");function c(){return window.innerWidth>991.98}function d(){const d=window.scrollY>0,u=c()&&d;t&&n&&(u?(t.style.display="none",n.style.display="block",n.style.opacity="1",n.style.visibility="visible"):(t.style.display="block",t.style.opacity="1",t.style.visibility="visible",n.style.display="none"),c()||(t.style.display="none",n.style.display="block",n.style.opacity="1",n.style.visibility="visible")),o.forEach((e=>{e.style.display=u?"flex":"",e.style.flexDirection=u?"row":""})),s.forEach((e=>{e.style.display=u?"flex":"",e.style.flexDirection=u?"row":""})),r.forEach((e=>{e.style.marginRight=u?"10px":""})),a.forEach((e=>{e.style.marginRight=u?"10px":""})),l&&(l.style.gap=u?"5px":""),i&&(i.style.padding=u?"5px 0":""),u?e.classList.add("scrolled"):e.classList.remove("scrolled")}let u=!1;function p(){u||(requestAnimationFrame((function(){d(),u=!1})),u=!0)}window.addEventListener("scroll",p),window.addEventListener("resize",(function(){c()||([t,n,...o,...s,...r,...a,l,i].filter(Boolean).forEach((e=>e.style="")),e.classList.remove("scrolled")),p()})),d()})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".scroll-top");e?(window.addEventListener("scroll",(function(){window.pageYOffset>window.innerHeight/2?e.classList.add("visible"):e.classList.remove("visible")})),e.addEventListener("click",(function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}))):console.warn("Элемент .scroll-top не найден на странице:",window.location.pathname)})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".specs-table");if(e){const t=Array.from(e.querySelectorAll(".specs-table__header")).map((e=>e.textContent));e.querySelectorAll(".specs-table__row").forEach((e=>{Array.from(e.querySelectorAll("td")).forEach(((e,n)=>{e.setAttribute("data-label",t[n])}))}))}})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),document.querySelector(".icon-menu")&&document.addEventListener("click",(function(e){i&&e.target.closest(".icon-menu")&&(((e=500)=>{document.documentElement.classList.contains("lock")?o(e):s(e)})(),document.documentElement.classList.toggle("menu-open"))})),function(){const e=document.querySelectorAll("[data-spollers]");if(e.length>0){const i=Array.from(e).filter((function(e,t,n){return!e.dataset.spollers.split(",")[0]}));i.length&&s(i);let o=r(e,"spollers");function s(e,t=!1){e.forEach((e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_spoller-init"),a(e),e.addEventListener("click",l)):(e.classList.remove("_spoller-init"),a(e,!1),e.removeEventListener("click",l))}))}function a(e,t=!0){let n=e.querySelectorAll("[data-spoller]");n.length&&(n=Array.from(n).filter((t=>t.closest("[data-spollers]")===e)),n.forEach((e=>{t?(e.removeAttribute("tabindex"),e.classList.contains("_spoller-active")||(e.nextElementSibling.hidden=!0)):(e.setAttribute("tabindex","-1"),e.nextElementSibling.hidden=!1)})))}function l(e){const i=e.target;if(i.closest("[data-spoller]")){const o=i.closest("[data-spoller]"),s=o.closest("[data-spollers]"),r=s.hasAttribute("data-one-spoller"),a=s.dataset.spollersSpeed?parseInt(s.dataset.spollersSpeed):500;s.querySelectorAll("._slide").length||(r&&!o.classList.contains("_spoller-active")&&c(s),o.classList.toggle("_spoller-active"),((e,i=500)=>{e.hidden?n(e,i):t(e,i)})(o.nextElementSibling,a)),e.preventDefault()}}function c(e){const n=e.querySelector("[data-spoller]._spoller-active"),i=e.dataset.spollersSpeed?parseInt(e.dataset.spollersSpeed):500;n&&!e.querySelectorAll("._slide").length&&(n.classList.remove("_spoller-active"),t(n.nextElementSibling,i))}o&&o.length&&o.forEach((e=>{e.matchMedia.addEventListener("change",(function(){s(e.itemsArray,e.matchMedia)})),s(e.itemsArray,e.matchMedia)}));const d=document.querySelectorAll("[data-spoller-close]");d.length&&document.addEventListener("click",(function(e){e.target.closest("[data-spollers]")||d.forEach((e=>{const n=e.closest("[data-spollers]");if(n.classList.contains("_spoller-init")){const i=n.dataset.spollersSpeed?parseInt(n.dataset.spollersSpeed):500;e.classList.remove("_spoller-active"),t(e.nextElementSibling,i)}}))}))}}()})();